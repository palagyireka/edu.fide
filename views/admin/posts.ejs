<% layout('layouts/boilerplate') %>
<main class="blogs">
  <div class="posts-title">
    <p>Posts</p>
    <button class="fancytime"><a href="/admin/posts/new">New Post</a></button>
    <div class="page-counter"><%= pageNumber %></div>
  </div>
  <div id="b-posts">
    <% posts.forEach((post) => {%>
    <a class="blog-card" href="/admin/<%= post.id %>">
      <div class="tag-names"></div>
      <h2>
        <!-- style="background-image: url('<%= post.images[0].url %>')" -->
        <%= post.title %>
      </h2>
      <div class="img-container">
        <% if (post.images[0].url !== "") { %>
        <img src="<%= post.images[0].url %>" alt="image" />
        <% } %>
        <p><%= post.text %><br /></p>
      </div>

      <span> Read more here >> </span>
    </a>
    <% }) %>
  </div>
  <button id="load-more" class="fancytime">Load More</button>
</main>
<script>
  const jobbLinkek = document.querySelectorAll(".next-last a");
  for (const link of jobbLinkek) {
    link.addEventListener("mouseover", (evt) => {
      evt.target.previousElementSibling.style.marginLeft = "65px";
    });
    link.addEventListener("mouseout", (evt) => {
      evt.target.previousElementSibling.style.marginLeft = "15px";
    });
  }
  const bPosts = document.querySelector("#b-posts");
  const blogCards = document.querySelectorAll(".blog-card");
  let counter = 0;
  while (counter < blogCards.length) {
    const sor = document.createElement("div");
    sor.className = "blogsor";
    sor.appendChild(blogCards[counter]);
    if (counter + 1 != blogCards.length) {
      sor.appendChild(blogCards[counter + 1]);
    }
    if (counter + 2 != blogCards.length) {
      sor.appendChild(blogCards[counter + 2]);
    }
    bPosts.appendChild(sor);
    counter += 3;
  }
</script>
<script src="/js/loadMorePosts.js"></script>
